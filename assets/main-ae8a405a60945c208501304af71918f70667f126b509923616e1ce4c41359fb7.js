!function(l){var c,s,d,u,g;l.hasInitialized||(l.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},u=0,g=!1,l.combinationsUpdate=function(){if(c){var o=document.getElementById("combinations-table-filter-talents").value,n=new RegExp("^"+o.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),r=s.val(),i=d.val(),l=$.grep(c,function(e){if(""!==o&&!n.test(e[1]))return!1;if(r.indexOf(e[2])<0)return!1;var t=e[3].split(", ");return!($(i).filter(t).length<t.length&&"None"!==e[3])}),a=document.getElementById("combinations-table-data"),e=$(document.getElementById("combinations-table-nav"));e.data("twbs-pagination")&&e.twbsPagination("destroy"),e.twbsPagination({totalPages:Math.max(1,Math.ceil(l.length/15)),visiblePages:3,onPageClick:function(e,t){var o="";l.slice(15*(t-1),15*t).forEach(function(e){o+="<tr>",o+="<td>"+e[0]+"</td>",o+="<td>"+e[1]+"</td>",o+="<td>"+e[2]+"</td>",o+="<td>"+e[3]+"</td>",o+="<td>"+k(e[4])+"</td>",g&&(o+="<td>",6===e.length&&(o+=k(e[5])),o+="</td>"),e[4]==u?o+="<td></td>":o+="<td>"+(100*e[4]/u-100).toFixed(1)+"%</td>",o+="</tr>"}),a.innerHTML=o}})}},l.combinationsInit=function(e){$.get("/"+e,function(e){var t,o=[],n=[];(c=e).forEach(function(e){$.inArray(e[2],o)<0&&o.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,n)<0&&n.push(e)}),e[4]>u&&(u=e[4]),g||6!==e.length||(g=!0)}),o.sort().reverse(),o.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(s=$("#combinations-table-filter-sets")).selectpicker("val",o),s.selectpicker("refresh"),n.sort(),n.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),d=$("#combinations-table-filter-legendaries"),-1<(t=n.indexOf("Cinidaria"))&&n.splice(t,1),d.selectpicker("val",n),d.selectpicker("refresh");var r=document.getElementById("combinations-table-headers"),i=document.getElementById("combinations-table-filters");g&&(r.insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),i.insertAdjacentHTML("beforeend","<th></th>")),r.insertAdjacentHTML("beforeend","<th></th>"),i.insertAdjacentHTML("beforeend","<th></th>"),l.combinationsUpdate(),A()})},l.racesInit=function(e,h,b){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var t;(e=new google.visualization.arrayToDataTable(e)).sort({column:1,desc:!0}),e.insertColumn(2,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(3,{type:"string",role:"style"});var o=["Human","Dwarf","Night Elf","Gnome","Worgen","Draenei","Lightforged Draenei","Void Elf"],n=["Orc","Troll","Tauren","Goblin","Undead","Blood Elf","Highmountain Tauren","Nightborne"];for(t=0;t<e.getNumberOfRows();t++){var r="",i=e.getValue(t,0);r=0<=$.inArray(i,o)?"stroke-width: 3; stroke-color: #1144AA; color: #3366CC":0<=$.inArray(i,n)?"stroke-width: 3; stroke-color: #770000; color: #AA0000":"stroke-width: 3; stroke-color: #4d4d4d; color: #808080";var l=e.getValue(t,1),a=100*((b+l)/b-1),c='<div class="chart-tooltip"><b>'+i+"</b><br><b>Increase:</b> "+k(a.toFixed(2))+"% ("+k(l)+")</div>";e.setValue(t,3,r),e.setValue(t,2,c),e.setValue(t,1,a)}var s=document.getElementById("simulations-metas"),d=s.innerWidth-2*window.getComputedStyle(s,null).getPropertyValue("padding-left"),u=768<=document.documentElement.clientWidth?d:700,g="#222222",m="#cccccc",f={title:h,backgroundColor:g,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:m},title:"% DPS Gain",titleTextStyle:{color:m},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:m},titleTextStyle:{color:m}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:g,auraColor:"transparent"}},titleTextStyle:{color:m},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:u};new google.visualization.BarChart(document.getElementById("google-chart")).draw(V(e),f),A(),I(f.chartArea)})})},l.relicsInit=function(e,C,S){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var t,o;(e=new google.visualization.arrayToDataTable(e)).sort({column:5,desc:!0});var n=["Weapon Item Level","% DPS Gain"];for(e=function(e,t){var o,n,r;for(o=0;o<t.length;o++)for(r=0;r<e.getNumberOfRows();r++)if(e.getValue(r,0)==t[o]){if(0!=r){for(e.insertRows(0,1),r+=1,e.setRowProperties(0,e.getRowProperties(r)),n=0;n<e.getNumberOfColumns();n++)e.setValue(0,n,e.getValue(r,n));e.removeRow(r)}break}return e}(e,n),t=2;t<e.getNumberOfColumns();t+=2)e.setColumnProperties(t,{type:"string",role:"annotation"});for(t=3;t<=e.getNumberOfColumns();t+=4)e.insertColumn(t,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(t+1,{type:"string",role:"style"});var r=["Light Speed","Infusion of Light","Secure in the Light","Shocklight"],i=["Master of Shadows","Murderous Intent","Shadowbind","Torment the Weak","Chaotic Darkness","Dark Sorrows"];for(o=0;o<e.getNumberOfRows();o++){var l="",a=e.getValue(o,0);a==n[1]?l="stroke-width: 1; stroke-color: #808080; color: #b3b3b3":a==n[0]?l="stroke-width: 0.5; stroke-color: #4d4d4d; color: #808080":0<=$.inArray(a,r)?l="stroke-width: 3; stroke-color: #bb8800; color: #ffcc00":0<=$.inArray(a,i)&&(l="stroke-width: 3; stroke-color: #5500aa; color: #8800ff");var c=0,s=0;for(t=1;t<e.getNumberOfColumns();t+=4){var d=e.getValue(o,t),u=d-s,g=100*((S+d)/S-1),m=g-c,f='<div class="chart-tooltip"><b>'+e.getValue(o,t+1)+"x "+a+"</b><br><b>Total:</b> "+k(g.toFixed(2))+"% ("+k(d.toFixed())+")<br><b>Increase:</b> "+k(m.toFixed(2))+"% ("+k(u.toFixed())+")</div>";e.setValue(o,t+2,f),e.setValue(o,t+3,l),e.setValue(o,t,m),m<0&&(e.setValue(o,t,0),e.setValue(o,t+1,"")),c=c<g?g:c,s=s<d?d:s}}var h=e.addColumn("number");for(o=0;o<e.getNumberOfRows();o++)0<=$.inArray(e.getValue(o,0),r)||0<=$.inArray(e.getValue(o,0),i)?e.setValue(o,h,1):e.setValue(o,h,0);e.sort([{column:h,desc:!1}]),e.removeColumn(h);var b=document.getElementById("simulations-metas"),p=b.innerWidth-2*window.getComputedStyle(b,null).getPropertyValue("padding-left"),w=768<=document.documentElement.clientWidth?p:700,v="#222222",y="#cccccc",x={title:C,backgroundColor:v,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:y},title:"% DPS Gain",titleTextStyle:{color:y},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:y},titleTextStyle:{color:y}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:v,auraColor:"transparent"}},titleTextStyle:{color:y},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:w};new google.visualization.BarChart(document.getElementById("google-chart")).draw(V(e),x),A(),I(x.chartArea)})})},l.trinketsInit=function(e,p,w){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var t,o,n=(e=new google.visualization.arrayToDataTable(e)).addColumn("number");for(o=0;o<e.getNumberOfRows();o++){var r=0;for(t=1;t<n;t++)e.getValue(o,t)>r&&(r=e.getValue(o,t));e.setValue(o,n,r)}for(e.sort([{column:n,desc:!0}]),e.removeColumn(n),t=2;t<=e.getNumberOfColumns();t+=2)e.insertColumn(t,{type:"string",role:"tooltip",p:{html:!0}});for(o=0;o<e.getNumberOfRows();o++){var i=0,l=0;for(t=1;t<e.getNumberOfColumns();t+=2){var a=e.getValue(o,t),c=a-l,s=100*((w+a)/w-1),d=s-i,u='<div class="chart-tooltip"><b>'+e.getValue(o,0)+"<br> Item Level "+e.getColumnLabel(t)+"</b><br><b>Total:</b> "+k(s.toFixed(2))+"% ("+k(a.toFixed())+")<br><b>Increase:</b> "+k(d.toFixed(2))+"% ("+k(c.toFixed())+")</div>";e.setValue(o,t+1,u),e.setValue(o,t,d),i=i<s?s:i,l=l<a?a:l}}var g=document.getElementById("simulations-metas"),m=g.innerWidth-2*window.getComputedStyle(g,null).getPropertyValue("padding-left"),f=768<=document.documentElement.clientWidth?m:700,h="#cccccc",b={title:p,backgroundColor:"#222222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:h},title:"% DPS Gain",titleTextStyle:{color:h},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:f};new google.visualization.BarChart(document.getElementById("google-chart")).draw(V(e),b),A(),I(b.chartArea)})})},l.hasInitialized=!0,window.herodamage=l);function k(e){return new Intl.NumberFormat("en-US").format(e)}function A(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function V(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function I(l){var a=document.getElementById("google-chart"),c=document.getElementById("chart-overlay");a.onmousemove=function(e){var t=a.getBoundingClientRect(),o=t.left+l.left+window.scrollX,n=t.right-l.right+window.scrollX,r=t.top+l.top+window.scrollY,i=t.bottom-l.bottom+window.scrollY;e.pageX>=o&&e.pageX<=n&&e.pageY>=r&&e.pageY<=i?(c.style.display="block",c.style.top=r+"px",c.style.left=e.pageX+"px",c.style.height=a.offsetHeight-l.top-l.bottom+"px"):c.style.display="none"}}}(window.herodamage||{});